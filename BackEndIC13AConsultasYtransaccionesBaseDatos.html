<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://manzjulio064.github.io/glosariodeterminos/d48865cf5505cebc.css"
    />
    <link
      rel="stylesheet"
      href="https://manzjulio064.github.io/glosariodeterminos/digitalhousecssstandar.css"
    />
    <title>Consultas y transacciones sobre base de datos</title>
  </head>
  <body>
    <div class="container">
      <br />
      <div class="">
        <div class="layout">
          <div class="dh-flex">
            <button class="navigator__button navigator__button_prev">
              <div class="navigator__icon">
                <i
                  data-testid="icon"
                  class="uil icon uil-arrow-left icon_md"
                ></i>
              </div>
              <span class="navigator__label">Anterior</span>
            </button>
            <div class="navigator__title">
              <div class="header">
                <p class="header__heading header__heading_md">
                  Módulo 2 · C13A - Consultas y transacciones sobre base de
                  datos
                </p>
                <h2 class="header__title header__title_md">
                  Consultas y transacciones sobre base de datos
                </h2>
              </div>
            </div>
            <button class="navigator__button navigator__button_next">
              <div class="navigator__icon">
                <i
                  data-testid="icon"
                  class="uil icon uil-arrow-right icon_md"
                ></i>
              </div>
              <span class="navigator__label">Siguiente</span>
            </button>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div>
                <h2>Utilizar JDBC Prepared Statement</h2>

                <p>
                  Lo primero que tenemos que entender es cuál es la diferencia
                  entre un <span>Statement</span> de JDBC y un
                  <span>Prepared Statement</span>. Cuando nosotros construimos
                  una consulta normal de JDBC utilizamos un Statement, o
                  sentencia, que se encarga de definir una consulta SQL a
                  ejecutar contra el motor de la base de datos.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div style="width: 100%">
                <div
                  style="
                    position: relative;
                    padding-bottom: 56.25%;
                    padding-top: 0;
                    height: 0;
                  "
                >
                  <iframe
                    scrolling="yes"
                    allowfullscreen="true"
                    src="https://view.genial.ly/610d979614561c0daf758bea"
                    style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                    "
                    height="675"
                    width="1200"
                    frameborder="0"
                  ></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div>
                <h3>Conclusión</h3>
                <p>
                  A partir de lo visto anteriormente, podemos concluir que no
                  solo nos estaremos ahorrando la construcción de planes de
                  ejecución, sino que también estamos evitando que nos inyecten
                  SQL, ya que al parametrizar la consulta, la API de JDBC nos
                  protege contra este tipo de ataques. Normalmente el uso de
                  consultas parametrizadas mejora el rendimiento entre un 20 y
                  un 30 % a nivel de base de datos.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div>
                <h2>Modificar datos con PrepareStatement</h2>
                <h3>Update</h3>

                <p>
                  Ahora veremos cómo ejecutar un update.<br /><br />

                  Para ello debemos preparar una query y agregarle el símbolo ?
                  donde vamos a reemplazar el dato. El método executeUpdate()
                  devuelve un entero indicando el número de filas afectadas por
                  la modificación. Por ejemplo:
                </p>

                <p>
                  <span>UPDATE PERSONAS SET NOMBRE=? WHERE APELLIDO=?</span>
                </p>

                <div>
                  <p>
                    String query = (<span
                      >"UPDATE PERSONAS SET NOMBRE=? WHERE APELLIDO=?”</span
                    >)<span
                      >;<br />
                      try</span
                    >
                    (PreparedStatement pstmt = con.prepareStatement(query)) {<br /><br />

                    pstmt.setString(1<span>,</span> <span>Mariano"</span>)<span
                      >;</span
                    ><br />
                    pstmt.setString(2<span>,</span>
                    <span>"Martinez"</span>)<span>;</span><br />
                    pstmt.executeUpdate()<span>;</span><br /><br />

                    }<br />
                    <span>catch</span> (SQLException ex) {<br /><br />

                    }
                  </p>
                </div>
              </div>

              <div>
                <h3>Insert</h3>

                <div>
                  <p>
                    String query = (<span
                      >"INSERT INTO PERSONAS (NOMBRE, APELLIDO) VALUES
                      (?,?)</span
                    >)<span
                      >;<br />
                      try</span
                    >
                    (PreparedStatement pstmt = con.prepareStatement(query)) {<br /><br />

                    pstmt.setString(1<span>,</span> <span>Mariano"</span>)<span
                      >;</span
                    ><br />
                    pstmt.setString(2<span>,</span>
                    <span>"Martinez"</span>)<span>;</span><br />
                    pstmt.executeUpdate()<span>;</span><br /><br />

                    }<br />
                    <span>catch</span> (SQLException ex) {<br /><br />

                    }
                  </p>
                </div>
              </div>

              <div>
                <h3>Delete</h3>

                <div>
                  <p>
                    String query = (<span
                      >"DELETE FROM PERSONAS WHERE APELLIDO=?</span
                    >)<span
                      >;<br />
                      try</span
                    >
                    (PreparedStatement pstmt = con.prepareStatement(query)) {<br /><br />

                    pstmt.setString(1<span>,</span> <span>Mariano"</span>)<span
                      >;</span
                    ><br />
                    pstmt.executeUpdate()<span>;</span><br /><br />

                    }<br />
                    <span>catch</span> (SQLException ex) {<br /><br />

                    }
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <iframe
              src="https://docs.google.com/presentation/d/1IVgRgjUBSvEt7GT6lPPc0dedSIEcNQEt/preview?usp=sharing"
              allowfullscreen=""
              title="BlockIframe"
              class="slide-block__content"
            ></iframe>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div>
                <p>
                  Te invitamos a recorrer el siguiente gráfico para ver cómo se
                  codifica lo que explicamos anteriormente.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div style="width: 100%">
                <div
                  style="
                    position: relative;
                    padding-bottom: 75%;
                    padding-top: 0;
                    height: 0;
                  "
                >
                  <iframe
                    scrolling="yes"
                    allowfullscreen="true"
                    src="https://view.genial.ly/610c2587d209d80d7ac52430"
                    style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                    "
                    height="600"
                    width="800"
                    frameborder="0"
                  ></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div>
                <h3>Pasos para invocar Stored Procedures</h3>

                <p>
                  Ahora llegó el momento de darte algunas pistas o pasos para
                  llamar a un procedimiento almacenado en JDBC.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <div class="text-block__content">
              <div style="width: 100%">
                <div
                  style="
                    position: relative;
                    padding-bottom: 45.83%;
                    padding-top: 0;
                    height: 0;
                  "
                >
                  <iframe
                    scrolling="yes"
                    allowfullscreen="true"
                    src="https://view.genial.ly/610d37a514561c0daf757d92"
                    style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                    "
                    height="550"
                    width="1200"
                    frameborder="0"
                  ></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="block-box x">
          <div>
            <iframe
              src="https://docs.google.com/file/d/1UISxLOHCcSHlYnCNTyuJWfijR1KVd1MJ/preview?usp=sharing"
              allowfullscreen=""
              title="BlockIframe"
              class="pdf-block__content"
            ></iframe>
          </div>
        </div>
      </div>

      <br />
    </div>
  </body>
</html>
